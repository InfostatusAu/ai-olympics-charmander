# Data Model## Core Entity: Prospect

Ultra-minimal database entity for basic tracking only.

**Fields**:
- `id`: TEXT (Primary Key, UUID format)
- `company_name`: TEXT (Required)
- `domain`: TEXT (Unique)
- `research_status`: TEXT DEFAULT 'pending' (pending, researched, failed)
- `created_at`: DATETIME DEFAULT CURRENT_TIMESTAMP
- `updated_at`: DATETIME DEFAULT CURRENT_TIMESTAMP

**That's it!** No complex relationships, no JSON blobs, no workflow tracking.

**SQLite Schema**:
```sql
CREATE TABLE prospects (
    id TEXT PRIMARY KEY,
    company_name TEXT NOT NULL,
    domain TEXT UNIQUE,
    research_status TEXT DEFAULT 'pending',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_prospects_domain ON prospects(domain);
CREATE INDEX idx_prospects_status ON prospects(research_status);
```Prospect Research (Markdown-First)

**Date**: September 13, 2025  
**Feature**: MCP Server Prospect Research  
**Phase**: 1 - Minimal Data Model for AI-Generated Reports

## Design Philosophy

**PRIMARY OUTPUT**: AI-generated markdown reports with research findings  
**DATABASE ROLE**: Minimal metadata tracking only  
**DEV EFFORT**: Focus on AI logic, not complex database operations  

## Core Entity: Prospect

Ultra-minimal database entity for basic tracking only.

**Fields**:
- `id`: UUID (Primary Key)
- `company_name`: VARCHAR(255) (Required)
- `domain`: VARCHAR(255) (Unique)
- `status`: ENUM('researched', 'in_progress') DEFAULT 'in_progress'
- `created_at`: TIMESTAMP WITH TIME ZONE
- `updated_at`: TIMESTAMP WITH TIME ZONE

**That's it!** No complex relationships, no workflow tracking, no JSON blobs.

## File System: AI-Generated Markdown Content

The real value is in AI-generated markdown files stored in the filesystem:

### File Structure
```
/data/
â”œâ”€â”€ icp.md                                    # Single ICP definition (version controlled)
â”œâ”€â”€ prospects/
â”‚   â”œâ”€â”€ {prospect_id}_research.md            # Step 1: Raw research findings
â”‚   â”œâ”€â”€ {prospect_id}_profile.md             # Step 2: Structured mini profile  
â”‚   â””â”€â”€ {prospect_id}_talking_points.md      # Step 3: Conversation starters
â””â”€â”€ templates/                                # Markdown templates for consistency
    â”œâ”€â”€ research_template.md
    â”œâ”€â”€ profile_template.md
    â””â”€â”€ talking_points_template.md
```

### 1. Research Report (`/data/prospects/{prospect_id}_research.md`)
**Purpose**: Comprehensive unstructured research findings from Step 1  
**Generated by**: `research_prospect` tool  
**Content**: Company background, recent news, technology stack, decision makers, pain points

**Example Structure**:
```markdown
# Company Research: {Company Name}

## Company Overview
- **Industry**: Technology/SaaS
- **Size**: 150-200 employees  
- **Location**: San Francisco, CA
- **Website**: https://company.com

## Recent Developments
- Raised $15M Series A in March 2024
- Launched new AI features in Q2 2024
- Expanded to European market

## Technology Stack
- Cloud-native on AWS
- React/Node.js application
- PostgreSQL database

## Decision Makers
- **CEO**: John Smith (LinkedIn: /in/johnsmith)
- **CTO**: Jane Doe (LinkedIn: /in/janedoe)
- **VP Engineering**: Bob Wilson

## Pain Points Identified
- Manual data processing workflows
- Scaling customer support
- Integration challenges with legacy systems

## Sources
- Company website: https://company.com/about
- TechCrunch article: https://techcrunch.com/company-funding
- LinkedIn profiles and posts
- Recent job postings

---
*Research completed: 2025-09-13T10:30:00Z*  
*Research status: Comprehensive*  
*Confidence score: 0.85*
```

### 2. Mini Profile (`/data/prospects/{prospect_id}_profile.md`)
**Purpose**: Structured 13-field analysis from Step 2  
**Generated by**: `generate_profile` tool  
**Content**: Standardized profile template with key business intelligence

**Example Structure**:
```markdown
# Mini Profile: {Company Name}

| Field | Value |
|-------|--------|
| **Company** | TechCorp Inc |
| **Industry** | SaaS/AI |
| **Size** | 150-200 employees |
| **Revenue** | $10M-$25M (estimated) |
| **Location** | San Francisco, CA |
| **Funding** | Series A, $15M (March 2024) |
| **Tech Stack** | AWS, React, Node.js |
| **Hiring Signals** | Hiring Data Scientists, AI Engineers (5 open positions) |
| **Tech Adoption** | AWS migration, AI/ML pipeline implementation |
| **Recent PR** | Featured in TechCrunch for AI innovation |
| **Decision Makers** | CEO John Smith, CTO Jane Doe |
| **Engagement Signals** | CTO posted about AI compliance challenges |
| **Infostatus Fit** | High - automation needs, manual workflow pain points |

## Key Pain Points
- Manual data processing workflows consuming 20+ hours/week
- Document handling inefficiencies in customer onboarding
- Scaling challenges with current manual processes

## Engagement Timing
- Q4 budget planning cycle
- Recent funding provides investment capacity
- Active hiring suggests growth phase priorities

---
*Profile generated: 2025-09-13T11:15:00Z*  
*Source: {prospect_id}_research.md*  
*Confidence score: 0.83*
```

### 3. Talking Points (`/data/prospects/{prospect_id}_talking_points.md`)
**Purpose**: Personalized conversation starters from Step 3  
**Generated by**: `create_talking_points` tool  
**Content**: Categorized conversation openers with relevance scoring

**Example Structure**:
```markdown
# Conversation Starters: {Company Name}

## ðŸŽ¯ Business Challenges
**Relevance: High | Timing: Immediate**
- "I noticed you recently raised Series A funding - many companies at your stage struggle with scaling their data operations manually. How is TechCorp handling the increased data volume?"
- "With your expansion to Europe, data compliance and automated reporting becomes crucial..."

## ðŸ”§ Technology Opportunities  
**Relevance: High | Timing: Q4 Planning**
- "Your AWS-native stack is perfect for our API integration - we can have you up and running in under a week..."
- "React developers love our TypeScript SDK - it integrates seamlessly with your existing frontend..."

## ðŸ“° Recent Company News
**Relevance: Medium | Timing: Follow recent announcement**
- "Congratulations on the $15M Series A! That's a strong validation of your AI features. As you scale, have you considered automating your data pipeline?"
- "I saw the announcement about your European expansion - data localization must be top of mind..."

## ðŸ‘¥ Personal/Professional Connections
**Relevance: Medium | Timing: Warm introduction**
- "I noticed John Smith previously worked at DataCorp - we've helped several of their alumni companies optimize their data workflows..."
- "Jane Doe's background in distributed systems is impressive - she'll appreciate our scalable architecture..."

## âœ… Solution Alignment
**Relevance: High | Timing: Pain point discussion**
- "Companies your size typically see 40% time savings when they automate manual data processes - what's your biggest bottleneck right now?"
- "Our customer success team has worked with 50+ companies in your space - we know exactly what challenges you're facing..."

## ðŸŽ¯ Best Opening Lines
1. **Series A congratulations + automation pain point** (Relevance: 0.92)
2. **AWS migration + document processing** (Relevance: 0.88)  
3. **Hiring Data Scientists + time optimization** (Relevance: 0.85)

---
*Talking points generated: 2025-09-13T11:45:00Z*  
*Source: {prospect_id}_profile.md*  
*Categories: 5 | Total points: 12 | Conversation openers: 3*
```

### 4. ICP Reference (`/data/icp.md`)
**Purpose**: Ideal Customer Profile criteria for prospect evaluation  
**Managed by**: Business team (version controlled)  
**Used by**: `find_new_prospect` and research tools for qualification

**Content**: Existing ICP definition from `/gemini-docs/ICP.md`

### 3. IdealCustomerProfile (ICP)
Defines criteria for qualifying prospects during find_new_prospect operations.

**Fields**:
- `id`: UUID (Primary Key)
- `name`: VARCHAR(255) (Required, Unique)
- `description`: TEXT
- `criteria`: JSONB (Required - ICP matching criteria)
- `min_employee_count`: INTEGER
- `max_employee_count`: INTEGER
- `target_industries`: TEXT[]
- `target_locations`: TEXT[]
- `annual_revenue_min`: DECIMAL
- `annual_revenue_max`: DECIMAL
- `technology_stack`: TEXT[]
- `company_stage`: ENUM('startup', 'growth', 'established', 'enterprise')
- `is_active`: BOOLEAN DEFAULT TRUE
- `created_at`: TIMESTAMP WITH TIME ZONE
- `updated_at`: TIMESTAMP WITH TIME ZONE

**Relationships**:
- Many-to-Many with Prospect (via ProspectICP junction table)

**Validation Rules**:
- name: Required, unique, 1-255 characters
- criteria: Required, valid JSON structure
- min_employee_count: Positive integer or null
- max_employee_count: Greater than min_employee_count when both provided

### 4. ProspectProfile
**NEW ENTITY**: Stores structured Mini Profile data generated from unstructured research in Step 2 of the workflow.

**Fields**:
- `id`: UUID (Primary Key)
- `prospect_id`: UUID (Foreign Key to Prospect, Unique)
- `company_name`: VARCHAR(255) (Denormalized for quick access)
- `employee_count`: INTEGER
- `revenue_range`: VARCHAR(50) (e.g., "$100M-$500M", "Unknown")
- `industry`: VARCHAR(100)
- `location`: VARCHAR(255)
- `hiring_signals`: TEXT (Job postings, hiring activity)
- `tech_adoption`: TEXT (Cloud/AI/automation usage)
- `public_pr_signals`: TEXT (Press releases, news mentions)
- `funding_growth`: TEXT (Funding rounds, growth indicators)
- `tender_compliance`: TEXT (Government contracts, compliance)
- `decision_makers`: TEXT (Key decision-maker roles and contacts)
- `engagement_potential`: TEXT (Social media, industry engagement)
- `general_notes`: TEXT (Additional observations)
- `infostatus_pain_points`: TEXT (Pain points Infostatus can address)
- `confidence_score`: DECIMAL(3,2) (0.00-1.00, profile completeness/accuracy)
- `generated_by`: VARCHAR(50) (AI model/version used for generation)
- `created_at`: TIMESTAMP WITH TIME ZONE
- `updated_at`: TIMESTAMP WITH TIME ZONE

**Relationships**:
- One-to-One with Prospect

**Validation Rules**:
- prospect_id: Required, unique foreign key
- company_name: Required, 1-255 characters
- confidence_score: Between 0.00 and 1.00
- At least 5 profile fields must be populated (not null/empty)

### 5. TalkingPoint
**NEW ENTITY**: Stores personalized conversation starters generated in Step 3 of the workflow.

**Fields**:
- `id`: UUID (Primary Key)
- `prospect_id`: UUID (Foreign Key to Prospect)
- `category`: ENUM('personal_professional', 'industry_trends', 'technology_opportunities', 'company_developments', 'solution_alignment')
- `title`: VARCHAR(255) (Brief talking point headline)
- `content`: TEXT (Detailed conversation starter)
- `relevance_score`: DECIMAL(3,2) (0.00-1.00, relevance to prospect)
- `source_data`: JSONB (Reference to profile fields that inspired this point)
- `usage_count`: INTEGER DEFAULT 0 (Track how often used)
- `last_used_at`: TIMESTAMP WITH TIME ZONE
- `is_active`: BOOLEAN DEFAULT TRUE
- `generated_by`: VARCHAR(50) (AI model/version used for generation)
- `created_at`: TIMESTAMP WITH TIME ZONE
- `updated_at`: TIMESTAMP WITH TIME ZONE

**Relationships**:
- Many-to-One with Prospect

**Validation Rules**:
- prospect_id: Required foreign key
- category: Must be one of enum values
- title: Required, 1-255 characters
- content: Required, minimum 20 characters
- relevance_score: Between 0.00 and 1.00

### 6. ResearchNote
Stores detailed research findings and intelligence gathered for prospects.

**Fields**:
- `id`: UUID (Primary Key)
- `prospect_id`: UUID (Foreign Key to Prospect)
- `note_type`: ENUM('company_background', 'recent_news', 'pain_points', 'competitive_analysis', 'decision_makers', 'technology_stack')
- `title`: VARCHAR(255) (Required)
- `content`: TEXT (Required)
- `source_url`: TEXT
- `source_type`: ENUM('api', 'firecrawl', 'playwright', 'manual')
- `confidence_score`: DECIMAL(3,2) (0.00-1.00)
- `metadata`: JSONB (Source-specific data)
- `created_at`: TIMESTAMP WITH TIME ZONE
- `updated_at`: TIMESTAMP WITH TIME ZONE

**Relationships**:
- Many-to-One with Prospect

**Validation Rules**:
- title: Required, 1-255 characters
- content: Required, minimum 10 characters
- confidence_score: Between 0.00 and 1.00
- note_type: Must be one of enum values

### 8. DataSource
Tracks external data sources and their performance for data acquisition.

**Fields**:
- `id`: UUID (Primary Key)
- `name`: VARCHAR(100) (Required, Unique)
- `source_type`: ENUM('api', 'firecrawl', 'playwright')
- `base_url`: TEXT
- `api_key_required`: BOOLEAN DEFAULT FALSE
- `rate_limit_per_hour`: INTEGER
- `success_rate`: DECIMAL(5,2) (Percentage)
- `avg_response_time_ms`: INTEGER
- `is_active`: BOOLEAN DEFAULT TRUE
- `last_used_at`: TIMESTAMP WITH TIME ZONE
- `configuration`: JSONB (Source-specific config)
- `created_at`: TIMESTAMP WITH TIME ZONE
- `updated_at`: TIMESTAMP WITH TIME ZONE

**Validation Rules**:
- name: Required, unique, 1-100 characters
- source_type: Must be one of enum values
- success_rate: Between 0.00 and 100.00
- avg_response_time_ms: Positive integer

### 9. ProspectICP (Junction Table)
Links prospects to the ICP criteria they match.

**Fields**:
- `prospect_id`: UUID (Foreign Key to Prospect)
- `icp_id`: UUID (Foreign Key to IdealCustomerProfile)
- `match_score`: DECIMAL(5,2) (0.00-100.00)
- `matching_criteria`: JSONB (Which criteria matched)
- `created_at`: TIMESTAMP WITH TIME ZONE

**Composite Primary Key**: (prospect_id, icp_id)

## Simplified MCP Tools

### 1. `research_prospect`
- **Input**: company name or domain
- **Database**: Create/update minimal prospect record with research_status='researched'
- **File Output**: Rich markdown research report saved to `/data/prospects/{id}_research.md`

### 2. `generate_profile` 
- **Input**: prospect_id
- **File Input**: Read `/data/prospects/{id}_research.md` for analysis
- **File Output**: Structured markdown profile saved to `/data/prospects/{id}_profile.md`

### 3. `create_talking_points`
- **Input**: prospect_id  
- **File Input**: Read `/data/prospects/{id}_profile.md` for personalization
- **File Output**: Conversation starters saved to `/data/prospects/{id}_talking_points.md`

### 4. `get_prospect_data`
- **Input**: prospect_id
- **Database**: Read prospect metadata
- **File Operations**: Return paths and content of all generated markdown files
- **Output**: Combined prospect data with file contents

### 5. `search_prospects`
- **Input**: search criteria
- **Database**: Query prospect metadata  
- **File Operations**: Optionally search within markdown content
- **Output**: Matching prospects with file paths

## Architecture Benefits

âœ… **Minimal Database Complexity**: Just one simple table with 6 fields  
âœ… **Focus on AI Logic**: 90% effort on content generation, 10% on persistence  
âœ… **Human-Readable Output**: Markdown files can be directly read and shared  
âœ… **Version Control Friendly**: Text files can be tracked in git  
âœ… **Fast Development**: No complex migrations or relationships  
âœ… **Easy Debugging**: Open markdown files to see exactly what AI generated  
âœ… **Copy-Paste Ready**: Content ready for emails, presentations, CRM  
âœ… **Template-Driven**: Consistent formatting across all outputs  

## Implementation Approach

### Database Responsibilities
- **Prospect metadata tracking**: Basic company info and research status
- **Search and filtering**: Find prospects by domain, company name, status
- **Duplicate prevention**: Ensure we don't research the same company twice

### File System Responsibilities  
- **Rich content storage**: Comprehensive research findings and analysis
- **Human-readable outputs**: Formatted for direct business use
- **AI-generated intelligence**: Research, profiles, and talking points
- **Template consistency**: Standardized formatting across all outputs

### State Management
- **Research status**: Tracked in database (`pending`, `researched`, `failed`)
- **Workflow progress**: Determined by file existence
  - Research complete: `{id}_research.md` exists
  - Profile complete: `{id}_profile.md` exists  
  - Talking points complete: `{id}_talking_points.md` exists

This approach prioritizes **AI-generated value** over database complexity, making the system easier to build, maintain, and debug while providing rich, actionable outputs for sales teams.
