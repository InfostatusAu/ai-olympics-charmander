{
  "openapi": "3.0.3",
  "info": {
    "title": "MCP Prospect Research Server - 3-Step Workflow",
    "description": "Model Context Protocol server for automated 3-step prospect research workflow: Research → Mini Profile → Talking Points",
    "version": "1.1.0",
    "contact": {
      "name": "MCP Prospect Research API",
      "url": "https://github.com/example/mcp-prospect-server"
    }
  },
  "servers": [
    {
      "url": "mcp://localhost",
      "description": "Local MCP server via JSON-RPC 2.0"
    }
  ],
  "paths": {
    "/tools/find_new_prospect": {
      "post": {
        "summary": "Find New Prospect",
        "description": "Discover qualified leads matching ideal customer profile criteria",
        "operationId": "findNewProspect",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FindNewProspectRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful prospect discovery",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FindNewProspectResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MCPError"
                }
              }
            }
          }
        }
      }
    },
    "/tools/research_prospect": {
      "post": {
        "summary": "Research Prospect (Step 1)",
        "description": "Compile comprehensive unstructured intelligence for a specific prospect using tiered data acquisition",
        "operationId": "researchProspect",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResearchProspectRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Research completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResearchProspectResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid prospect identifier",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MCPError"
                }
              }
            }
          }
        }
      }
    },
    "/tools/get_prospect_research": {
      "post": {
        "summary": "Get Prospect Research (Step 2 Helper)",
        "description": "Retrieve all unstructured research data for profile generation",
        "operationId": "getProspectResearch",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetProspectResearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Research data retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetProspectResearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/tools/generate_profile": {
      "post": {
        "summary": "Generate Profile (Step 2)",
        "description": "Transform unstructured research into structured Mini Profile template",
        "operationId": "generateProfile",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenerateProfileResponse"
                }
              }
            }
          }
        }
      }
    },
    "/tools/get_prospect_profile": {
      "post": {
        "summary": "Get Prospect Profile (Step 3 Helper)",
        "description": "Retrieve structured Mini Profile data for talking points generation",
        "operationId": "getProspectProfile",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetProspectProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile data retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetProspectProfileResponse"
                }
              }
            }
          }
        }
      }
    },
    "/tools/create_talking_points": {
      "post": {
        "summary": "Create Talking Points (Step 3)",
        "description": "Generate personalized conversation starters from Mini Profile data",
        "operationId": "createTalkingPoints",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTalkingPointsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Talking points generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateTalkingPointsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/tools/save_prospect": {
      "post": {
        "summary": "Save Prospect (Updated for Workflow)",
        "description": "Persist prospect profiles to the server's database with workflow support",
        "operationId": "saveProspect",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SaveProspectRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Prospect saved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SaveProspectResponse"
                }
              }
            }
          }
        }
      }
    },
    "/tools/retrieve_prospect": {
      "post": {
        "summary": "Retrieve Prospect (Full Workflow Support)",
        "description": "Query stored prospect data with full 3-step workflow support and filtering capabilities",
        "operationId": "retrieveProspect",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RetrieveProspectRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Prospects retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetrieveProspectResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "FindNewProspectRequest": {
        "type": "object",
        "properties": {
          "icp_name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Name of the Ideal Customer Profile to match against"
          },
          "limit": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 10,
            "description": "Maximum number of prospects to return"
          },
          "exclude_domains": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "hostname"
            },
            "maxItems": 50,
            "description": "Company domains to exclude from results"
          }
        },
        "required": ["icp_name"]
      },
      "FindNewProspectResponse": {
        "type": "object",
        "properties": {
          "prospects": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProspectSummary"
            }
          },
          "total_found": {
            "type": "integer"
          },
          "icp_matched": {
            "type": "string"
          }
        }
      },
      "ResearchProspectRequest": {
        "type": "object",
        "properties": {
          "prospect_identifier": {
            "$ref": "#/components/schemas/ProspectIdentifier"
          },
          "research_depth": {
            "type": "string",
            "enum": ["basic", "standard", "comprehensive"],
            "default": "standard"
          },
          "focus_areas": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "company_background", "decision_makers", "recent_news",
                "pain_points", "competitive_analysis", "technology_stack",
                "funding_history", "hiring_signals", "public_pr_activity", "tender_compliance"
              ]
            },
            "uniqueItems": true,
            "maxItems": 10
          }
        },
        "required": ["prospect_identifier"]
      },
      "ResearchProspectResponse": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_status": {
            "type": "string",
            "enum": ["research_complete"]
          },
          "company_profile": {
            "$ref": "#/components/schemas/CompanyProfile"
          },
          "research_notes_created": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ResearchNoteSummary"
            }
          },
          "decision_makers_found": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContactPerson"
            }
          },
          "research_metadata": {
            "$ref": "#/components/schemas/ResearchMetadata"
          }
        }
      },
      "GetProspectResearchRequest": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "note_types": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "company_background", "recent_news", "pain_points",
                "competitive_analysis", "decision_makers", "technology_stack"
              ]
            }
          },
          "include_metadata": {
            "type": "boolean",
            "default": true
          }
        },
        "required": ["prospect_id"]
      },
      "GetProspectResearchResponse": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "company_name": {
            "type": "string"
          },
          "workflow_status": {
            "type": "string"
          },
          "research_notes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ResearchNote"
            }
          },
          "contact_persons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContactPerson"
            }
          }
        }
      },
      "GenerateProfileRequest": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "analysis_focus": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "revenue_range", "hiring_signals", "tech_adoption",
                "public_pr_signals", "funding_growth", "tender_compliance",
                "decision_makers", "engagement_potential", "infostatus_pain_points"
              ]
            }
          },
          "confidence_threshold": {
            "type": "number",
            "minimum": 0.0,
            "maximum": 1.0,
            "default": 0.7
          },
          "infostatus_context": {
            "$ref": "#/components/schemas/InfostatusContext"
          }
        },
        "required": ["prospect_id"]
      },
      "GenerateProfileResponse": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_status": {
            "type": "string",
            "enum": ["profile_complete"]
          },
          "mini_profile": {
            "$ref": "#/components/schemas/MiniProfile"
          },
          "profile_metadata": {
            "$ref": "#/components/schemas/ProfileMetadata"
          }
        }
      },
      "GetProspectProfileRequest": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "include_source_data": {
            "type": "boolean",
            "default": false
          }
        },
        "required": ["prospect_id"]
      },
      "GetProspectProfileResponse": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_status": {
            "type": "string"
          },
          "mini_profile": {
            "$ref": "#/components/schemas/MiniProfile"
          },
          "profile_metadata": {
            "$ref": "#/components/schemas/ProfileMetadata"
          }
        }
      },
      "CreateTalkingPointsRequest": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "talking_point_categories": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "personal_professional", "industry_trends", "technology_opportunities",
                "company_developments", "solution_alignment"
              ]
            },
            "default": ["industry_trends", "technology_opportunities", "solution_alignment"]
          },
          "conversation_context": {
            "$ref": "#/components/schemas/ConversationContext"
          },
          "max_talking_points": {
            "type": "integer",
            "minimum": 1,
            "maximum": 20,
            "default": 8
          }
        },
        "required": ["prospect_id"]
      },
      "CreateTalkingPointsResponse": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_status": {
            "type": "string",
            "enum": ["workflow_complete"]
          },
          "talking_points": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TalkingPoint"
            }
          },
          "generation_metadata": {
            "$ref": "#/components/schemas/TalkingPointMetadata"
          }
        }
      },
      "SaveProspectRequest": {
        "type": "object",
        "properties": {
          "prospect_data": {
            "$ref": "#/components/schemas/ProspectData"
          },
          "contact_persons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContactPersonInput"
            }
          },
          "research_notes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ResearchNoteInput"
            }
          }
        },
        "required": ["prospect_data"]
      },
      "SaveProspectResponse": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "operation": {
            "type": "string",
            "enum": ["created", "updated"]
          },
          "summary": {
            "$ref": "#/components/schemas/SaveSummary"
          }
        }
      },
      "RetrieveProspectRequest": {
        "type": "object",
        "properties": {
          "query": {
            "$ref": "#/components/schemas/ProspectQuery"
          },
          "include": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["contact_persons", "research_notes", "prospect_profile", "talking_points", "icp_matches", "all"]
            },
            "default": ["contact_persons", "prospect_profile"]
          },
          "sort": {
            "$ref": "#/components/schemas/SortOptions"
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationOptions"
          }
        }
      },
      "RetrieveProspectResponse": {
        "type": "object",
        "properties": {
          "prospects": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProspectWithWorkflow"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationResult"
          },
          "query_metadata": {
            "$ref": "#/components/schemas/QueryMetadata"
          }
        }
      },
      "ProspectIdentifier": {
        "type": "object",
        "oneOf": [
          {
            "properties": {
              "domain": {
                "type": "string",
                "format": "hostname"
              }
            },
            "required": ["domain"]
          },
          {
            "properties": {
              "company_name": {
                "type": "string"
              }
            },
            "required": ["company_name"]
          },
          {
            "properties": {
              "prospect_id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["prospect_id"]
          }
        ]
      },
      "ProspectSummary": {
        "type": "object",
        "properties": {
          "company_name": {
            "type": "string"
          },
          "domain": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "employee_count": {
            "type": "integer"
          },
          "location": {
            "type": "string"
          },
          "match_score": {
            "type": "number"
          }
        }
      },
      "CompanyProfile": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "domain": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "employee_count": {
            "type": "integer"
          },
          "founded_year": {
            "type": "integer"
          },
          "headquarters": {
            "type": "string"
          },
          "description": {
            "type": "string"
          }
        }
      },
      "MiniProfile": {
        "type": "object",
        "properties": {
          "company_name": {
            "type": "string"
          },
          "employee_count": {
            "type": "integer"
          },
          "revenue_range": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "location": {
            "type": "string"
          },
          "hiring_signals": {
            "type": "string"
          },
          "tech_adoption": {
            "type": "string"
          },
          "public_pr_signals": {
            "type": "string"
          },
          "funding_growth": {
            "type": "string"
          },
          "tender_compliance": {
            "type": "string"
          },
          "decision_makers": {
            "type": "string"
          },
          "engagement_potential": {
            "type": "string"
          },
          "general_notes": {
            "type": "string"
          },
          "infostatus_pain_points": {
            "type": "string"
          }
        }
      },
      "TalkingPoint": {
        "type": "object",
        "properties": {
          "talking_point_id": {
            "type": "string",
            "format": "uuid"
          },
          "category": {
            "type": "string",
            "enum": [
              "personal_professional", "industry_trends", "technology_opportunities",
              "company_developments", "solution_alignment"
            ]
          },
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "relevance_score": {
            "type": "number",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "conversation_opener": {
            "type": "boolean"
          }
        }
      },
      "ContactPerson": {
        "type": "object",
        "properties": {
          "full_name": {
            "type": "string"
          },
          "job_title": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "linkedin_url": {
            "type": "string",
            "format": "uri"
          },
          "decision_maker_level": {
            "type": "string",
            "enum": ["primary", "secondary", "influencer"]
          }
        }
      },
      "ResearchNote": {
        "type": "object",
        "properties": {
          "note_id": {
            "type": "string",
            "format": "uuid"
          },
          "note_type": {
            "type": "string",
            "enum": [
              "company_background", "recent_news", "pain_points",
              "competitive_analysis", "decision_makers", "technology_stack"
            ]
          },
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "source_url": {
            "type": "string",
            "format": "uri"
          },
          "source_type": {
            "type": "string",
            "enum": ["api", "firecrawl", "playwright", "manual"]
          },
          "confidence_score": {
            "type": "number",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ResearchNoteSummary": {
        "type": "object",
        "properties": {
          "note_id": {
            "type": "string",
            "format": "uuid"
          },
          "note_type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "content_preview": {
            "type": "string"
          }
        }
      },
      "InfostatusContext": {
        "type": "object",
        "properties": {
          "services": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": ["document_automation", "data_processing", "workflow_optimization"]
          },
          "target_pain_points": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": ["manual_processes", "document_handling", "compliance_automation"]
          }
        }
      },
      "ConversationContext": {
        "type": "object",
        "properties": {
          "meeting_type": {
            "type": "string",
            "enum": ["cold_outreach", "warm_introduction", "follow_up", "conference_meeting"],
            "default": "cold_outreach"
          },
          "salesperson_background": {
            "type": "string"
          },
          "infostatus_solutions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": ["document_automation", "data_processing", "compliance_tools"]
          }
        }
      },
      "ProspectWithWorkflow": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "company_name": {
            "type": "string"
          },
          "domain": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "employee_count": {
            "type": "integer"
          },
          "location": {
            "type": "string"
          },
          "qualification_status": {
            "type": "string",
            "enum": ["qualified", "unqualified", "pending", "contacted"]
          },
          "workflow_status": {
            "type": "string",
            "enum": [
              "initial", "researching", "research_complete",
              "analyzing", "profile_complete", "generating_points", "workflow_complete"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          },
          "profile_completed_at": {
            "type": "string",
            "format": "date-time"
          },
          "talking_points_completed_at": {
            "type": "string",
            "format": "date-time"
          },
          "contact_persons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContactPerson"
            }
          },
          "prospect_profile": {
            "$ref": "#/components/schemas/MiniProfile"
          },
          "talking_points": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TalkingPoint"
            }
          },
          "research_notes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ResearchNote"
            }
          }
        }
      },
      "ProspectQuery": {
        "type": "object",
        "properties": {
          "prospect_id": {
            "type": "string",
            "format": "uuid"
          },
          "domain": {
            "type": "string",
            "format": "hostname"
          },
          "company_name": {
            "type": "string"
          },
          "qualification_status": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["qualified", "unqualified", "pending", "contacted"]
            }
          },
          "workflow_status": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "initial", "researching", "research_complete",
                "analyzing", "profile_complete", "generating_points", "workflow_complete"
              ]
            }
          },
          "industries": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "search_text": {
            "type": "string"
          }
        }
      },
      "ResearchMetadata": {
        "type": "object",
        "properties": {
          "research_depth": {
            "type": "string"
          },
          "sources_used": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "total_notes_created": {
            "type": "integer"
          },
          "confidence_score": {
            "type": "number"
          },
          "research_time_ms": {
            "type": "integer"
          },
          "next_step": {
            "type": "string"
          }
        }
      },
      "ProfileMetadata": {
        "type": "object",
        "properties": {
          "confidence_score": {
            "type": "number"
          },
          "fields_populated": {
            "type": "integer"
          },
          "fields_missing": {
            "type": "integer"
          },
          "source_note_count": {
            "type": "integer"
          },
          "analysis_time_ms": {
            "type": "integer"
          },
          "generated_by": {
            "type": "string"
          },
          "next_step": {
            "type": "string"
          }
        }
      },
      "TalkingPointMetadata": {
        "type": "object",
        "properties": {
          "total_generated": {
            "type": "integer"
          },
          "avg_relevance_score": {
            "type": "number"
          },
          "conversation_openers": {
            "type": "integer"
          },
          "categories_covered": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "generation_time_ms": {
            "type": "integer"
          },
          "generated_by": {
            "type": "string"
          }
        }
      },
      "MCPError": {
        "type": "object",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "integer"
              },
              "message": {
                "type": "string"
              },
              "data": {
                "type": "object",
                "properties": {
                  "tool_name": {
                    "type": "string"
                  },
                  "error_type": {
                    "type": "string"
                  },
                  "details": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
